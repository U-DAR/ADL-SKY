<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ADL SKY</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body, html {
      margin: 0; padding: 0; height: 100%;
      font-family: 'Poppins', sans-serif;
      display: flex; justify-content: center; align-items: center;
      overflow: hidden; background-color: #f7f7f7;
    }
    .video-bg { position: fixed; inset: 0; width: 100%; height: 100%; object-fit: cover; z-index: -1; filter: brightness(65%) contrast(110%); }
    .overlay {
      position: absolute; inset: 0; width: 100%; height: 100%;
      background: linear-gradient(to bottom, rgba(0,0,0,0.4), rgba(0,0,0,0.7));
      display: flex; justify-content: center; align-items: center; color: white; flex-direction: column; padding: 20px;
    }
    @keyframes fadeSlideUp { from {opacity:0; transform: translateY(40px);} to {opacity:1; transform: translateY(0);} }
    @keyframes fadeZoomIn { from {opacity:0; transform: scale(0.8);} to {opacity:1; transform: scale(1);} }
    @keyframes logoFadeIn { from {opacity:0; transform: scale(0.7);} to {opacity:1; transform: scale(1);} }

    .form-container {
      background: rgba(255,255,255,0.2); backdrop-filter: blur(10px);
      padding: 16px; border-radius: 16px; width: 100%; max-width: 300px;
      display: flex; flex-direction: column; align-items: center;
      box-shadow: 0 10px 20px rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2);
      animation: fadeSlideUp 1s ease forwards;
    }
    h2 { font-size: 17px; margin: 4px 0; color: #fff; text-align: center; }
    p.subheading { margin: 4px 0 10px; color: #e0e0e0; font-size: 12px; text-align: center; }
    input, button {
      width: 100%; padding: 8px; margin: 6px 0; font-size: 14px; border-radius: 6px; text-align: right; transition: all .3s ease;
    }
    input:focus, button:focus { border-color: #003366; outline: none; }
    input { background: #fefefe; border: 1px solid #ccc; }
    button {
      background: #003366; color: #fff; font-weight: bold; cursor: pointer; font-size: 14px; border: none;
      align-self: center; padding: 10px 20px;
      animation: fadeZoomIn 1s ease forwards; animation-delay: 1s; opacity: 0; animation-fill-mode: forwards;
      transition: background-color .3s ease, transform .3s ease;
    }
    button:hover { background: #002244; transform: scale(1.05); }
    .logos { display: flex; justify-content: center; gap: 20px; margin-bottom: 10px; }
    .logos img { width: 80px; height: auto; transition: all .3s ease; opacity: 0; animation: logoFadeIn .8s ease forwards; }
    .logos img:nth-child(1){ animation-delay:.5s; } .logos img:nth-child(2){ animation-delay:.8s; }
    .logos img:hover { transform: scale(1.1); }
    ul.features { list-style: none; padding: 0; margin-top: 10px; color: #fff; font-size: 12px; line-height: 1.6; text-align: right; }

    .success-message, .error-message {
      margin-top: 10px; font-size: 14px; text-align: center; display: none;
    }
    .success-message { color: #00ff99; }
    .error-message { color: #ffb3b3; }

    @media (max-width: 600px){
      .form-container{ width:85%; padding:14px; max-width:260px; }
      .logos img{ width:70px; }
    }
  </style>
</head>
<body>

  <!-- خلفية الفيديو -->
  <video autoplay muted loop playsinline webkit-playsinline class="video-bg">
    <source src="your-video.mp4" type="video/mp4">
    <source src="your-video.webm" type="video/webm">
    <source src="your-video.ogv" type="video/ogg">
    متصفحك لا يدعم تشغيل الفيديو.
  </video>

  <div class="overlay">
    <div class="form-container">
      <div class="logos">
        <img src="images/logo1.png" alt="Logo 1">
        <img src="images/logo2.png" alt="Logo 2">
      </div>

      <h2>حياة تلامس السماء</h2>
      <p class="subheading">برج سكني بموقع مميز و تصميم راقٍ بمواصفات استثنائية</p>
      <h2>سجل اهتمامك</h2>

      <form id="interestForm" style="width: 100%; display: flex; flex-direction: column; align-items: center;">
        <input type="text" name="name" placeholder="الاسم الكامل" required>
        <input type="tel" name="phone" placeholder="رقم الهاتف" required>
        <!-- تتبع المصدر -->
        <input type="hidden" name="source" id="source">
        <!-- معلومات إضافية مفيدة في التقارير -->
        <input type="hidden" name="utm_source" id="utm_source">
        <input type="hidden" name="page_url" id="page_url">
        <input type="hidden" name="referrer" id="referrer">

        <button id="submitBtn" type="submit" style="align-self: center; width: auto; min-width: 100px; text-align: center;">إرسال</button>
      </form>

      <div class="success-message" id="successMessage">✅ تم استلام طلبك من <span id="platformName"></span></div>
      <div class="error-message" id="errorMessage">❌ حدث خطأ، حاول مرة أخرى.</div>

      <ul class="features">
        <li>✔ واجهات زجاجية بالكامل</li>
        <li>✔ مدخل فخم بتصميم فندقي</li>
        <li>✔ شقق نصف مؤثثة</li>
        <li>✔ وحدات تناسب السكن والأستثمار</li>
      </ul>
    </div>
  </div>

  <script>
    // قراءة باراميترات الرابط
    const params = new URLSearchParams(window.location.search);
    const rawSource = params.get("source");
    const utm = params.get("utm_source");

    // تعيين القيم المخفية
    const resolvedSource = (rawSource || utm || "unknown").toLowerCase();
    document.getElementById("source").value = resolvedSource;
    document.getElementById("utm_source").value = utm || "";
    document.getElementById("page_url").value = window.location.href;
    document.getElementById("referrer").value = document.referrer || "";

    // لتحسين رسالة المنصة
    const platformLabel = {
      snap: "سناب",
      snapchat: "سناب",
      tiktok: "تيك توك",
      instagram: "إنستغرام",
      ig: "إنستغرام",
      x: "إكس",
      twitter: "إكس",
      facebook: "فيسبوك",
      unknown: "مصدر غير معروف"
    }[resolvedSource] || resolvedSource;

    const form = document.getElementById("interestForm");
    const btn = document.getElementById("submitBtn");
    const okMsg = document.getElementById("successMessage");
    const errMsg = document.getElementById("errorMessage");
    const platformSpan = document.getElementById("platformName");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      okMsg.style.display = "none";
      errMsg.style.display = "none";
      btn.disabled = true;

      try {
        const formData = new FormData(form);
        const resp = await fetch("https://formspree.io/f/xgvzzebo", {
          method: "POST",
          body: formData,
          headers: { "Accept": "application/json" }
        });

        if (resp.ok) {
          platformSpan.textContent = platformLabel;
          okMsg.style.display = "block";
          form.reset();
          // أعد كتابة حقول التتبع بعد reset
          document.getElementById("source").value = resolvedSource;
          document.getElementById("utm_source").value = utm || "";
          document.getElementById("page_url").value = window.location.href;
          document.getElementById("referrer").value = document.referrer || "";
        } else {
          errMsg.style.display = "block";
        }
      } catch (err) {
        errMsg.style.display = "block";
      } finally {
        btn.disabled = false;
      }
    });
  </script>

</body>
</html>
